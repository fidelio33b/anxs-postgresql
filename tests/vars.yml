---

#--- will be set by molecule
#postgresql_version: "{{ postgresql_version | default('13') }}"

postgresql_version: 14

postgresql_port: 5432

postgresql_databases:
  - name: foobar
    owner: baz

  - name: qux
    owner: baz
    state: absent

postgresql_users:

  # postgresql >=10 does not accept unencrypted passwords
  - name: baz
    #pass: md51a1dc91c907325c69271ddf0c944bc72
    pass: SCRAM-SHA-256$4096:En1EXwWCRrgFjvDuZ3m5WQ==$Bt4eGQmfMdiTeuz3ZArSBN4XOq+r4VRKW1HZIyxbhUo=:PMAr9udG0/5+5c+36BDO37XFgr/jMDoulhYVwy3haXc=
    encrypted: yes

  - name: zab
    #pass: md51a1dc91c907325c69271ddf0c944bc72
    pass: SCRAM-SHA-256$4096:En1EXwWCRrgFjvDuZ3m5WQ==$Bt4eGQmfMdiTeuz3ZArSBN4XOq+r4VRKW1HZIyxbhUo=:PMAr9udG0/5+5c+36BDO37XFgr/jMDoulhYVwy3haXc=
    encrypted: yes

  - name: foo
    state: absent

  - name: zabaz

postgresql_user_privileges:
  - name: baz
    db: foobar

postgresql_database_schemas:
  - database: foobar
    state: present
    schema: acme
    owner: baz

postgresql_ext_install_extra_packages: yes

postgresql_ext_extra_packages:
  names:
    #- asgard
    #- plume-pg
    - mongodb-org-server
    #- emacs-nox
  apt_repositories: {}
    #depot-cs-rie: "deb http://debian.depot.e2.rie.gouv.fr/depot-cs/ {{ ansible_distribution_release }} main"
    #depot-mongodb-bullseye: "deb [ signed-by=/etc/apt/trusted.gpg.d/160D26BB1785BA38.gpg ] http://repo.mongodb.org/apt/debian bullseye/mongodb-org/7.0 main"
    #depot-mongodb-jammy: "deb [ arch=amd64,arm64 signed-by=/etc/apt/trusted.gpg.d/160D26BB1785BA38.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse"
    #depot-mongodb6-jammy: "deb [ arch=amd64,arm64 signed-by=/etc/apt/trusted.gpg.d/6A26B1AE64C3C388.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/6.0 multiverse"
  apt_keys: {}
    #depot-cs-rie:
    #  id: "CC9CACA5"
    #  url: "http://debian.depot.e2.rie.gouv.fr/keys/debian-archive-keyring/236BB7D85E32FCD00ED50F847D82EE6CCC9CACA5.asc"
    #depot-mongodb-bullseye:
    #  id: "160D26BB1785BA38"
    #  url: "https://pgp.mongodb.com/server-7.0.asc"
    #depot-mongodb6-jammy:
    #  id: "6A26B1AE64C3C388"
    #  url: "https://www.mongodb.org/static/pgp/server-6.0.asc"
  yum_repositories:
    depot-mongodb7-rhel:
      name: mongodb
      description: a document database designed for ease of application development and scaling
      url: "https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/7.0/x86_64/"
      gpgkey: "https://www.mongodb.org/static/pgp/server-7.0.asc"
